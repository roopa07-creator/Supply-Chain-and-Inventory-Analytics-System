CREATE DATABASE SupplyChainDB;
GO

USE SupplyChainDB;
GO

CREATE TABLE Products (
    ProductID INT IDENTITY(1,1) PRIMARY KEY,
    ProductName NVARCHAR(100),
    Category NVARCHAR(50),
    UnitPrice DECIMAL(10,2)
);

CREATE TABLE Suppliers (
    SupplierID INT IDENTITY(1,1) PRIMARY KEY,
    SupplierName NVARCHAR(100),
    ContactNumber NVARCHAR(15),
    City NVARCHAR(50)
);
CREATE TABLE Orders (
    OrderID INT IDENTITY(1,1) PRIMARY KEY,
    ProductID INT,
    QuantityOrdered INT,
    OrderDate DATE,
    CustomerName NVARCHAR(100),
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
);

CREATE TABLE Inventory (
    InventoryID INT IDENTITY(1,1) PRIMARY KEY,
    ProductID INT,
    SupplierID INT,
    QuantityInStock INT,
    LastRestockDate DATE,
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID),
    FOREIGN KEY (SupplierID) REFERENCES Suppliers(SupplierID)
USE SupplyChainDB;
GO

INSERT INTO Products (ProductName, Category, UnitPrice)
VALUES
('Laptop', 'Electronics', 60000),
('Mobile Phone', 'Electronics', 25000),
('Office Chair', 'Furniture', 5000),
('Desk', 'Furniture', 12000);

INSERT INTO Suppliers (SupplierName, ContactNumber, City)
VALUES
('Tech Supplies Ltd', '9876543210', 'Bangalore'),
('Home Needs Pvt Ltd', '9123456789', 'Chennai'),
('Office Mart', '9988776655', 'Hyderabad');

INSERT INTO Orders (ProductID, QuantityOrdered, OrderDate, CustomerName)
VALUES
(1, 2, GETDATE(), 'Customer A'),
(2, 1, GETDATE(), 'Customer B'),
(3, 4, GETDATE(), 'Customer C'),
(4, 1, GETDATE(), 'Customer D');

INSERT INTO Inventory (ProductID, SupplierID, QuantityInStock, LastRestockDate)
VALUES
(1, 1, 50, GETDATE()),
(2, 1, 30, GETDATE()),
(3, 2, 100, GETDATE()),
(4, 3, 20, GETDATE());
USE SupplyChainDB;
GO

SELECT
    ProductID,
    ProductName,
    Category,
    UnitPrice
FROM Products;


SELECT
    o.OrderID,
    p.ProductName,
    o.QuantityOrdered,
    o.OrderDate,
    p.UnitPrice,
    (o.QuantityOrdered * p.UnitPrice) AS TotalAmount,
    o.CustomerName
FROM Orders o
INNER JOIN Products p
    ON o.ProductID = p.ProductID;

SELECT
    i.InventoryID,
    p.ProductName,
    s.SupplierName,
    i.QuantityInStock,
    i.LastRestockDate
FROM Inventory i
INNER JOIN Products p
    ON i.ProductID = p.ProductID
INNER JOIN Suppliers s
    ON i.SupplierID = s.SupplierID;


SELECT
    p.ProductName,
    i.QuantityInStock
FROM Inventory i
INNER JOIN Products p
    ON i.ProductID = p.ProductID
WHERE i.QuantityInStock < 30;
